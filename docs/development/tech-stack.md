# 技术栈选型文档

## 技术架构概览

本项目采用前后端分离的架构，结合AI语音处理服务，实现完整的语音克隆和TTS功能。

```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   前端 (PWA)    │    │   后端 API      │    │   AI 语音服务   │
│                 │    │                 │    │                 │
│   Vue.js 3      │◄──►│  Python FastAPI │◄──►│   MockingBird   │
│   Vite          │    │  SQLAlchemy     │    │   TTS Engine    │
│   PWA           │    │  SQLite/PG      │    │   PyTorch       │
└─────────────────┘    └─────────────────┘    └─────────────────┘
         │                       │                       │
         │                       │                       │
         ▼                       ▼                       ▼
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   EdgeOne       │    │   云服务器       │    │   GPU 服务器    │
│   Pages         │    │   (API 服务)    │    │   (AI 计算)     │
└─────────────────┘    └─────────────────┘    └─────────────────┘
```

## 前端技术栈

### 核心框架
- **Vue.js 3**: 现代化的前端框架，支持Composition API
- **Vite**: 快速的构建工具，支持热重载和优化打包
- **TypeScript**: 可选，提供类型安全（后续可添加）

### PWA 支持
- **Vite PWA Plugin**: 自动生成Service Worker和Manifest
- **Workbox**: 缓存策略和离线支持

### UI 组件库 (待选择)
- **选项1: Vuetify**: Material Design风格，组件丰富
- **选项2: Element Plus**: 企业级UI库，中文友好
- **选项3: Naive UI**: 轻量级，TypeScript原生支持
- **推荐**: Element Plus (考虑到中文应用场景)

### 状态管理
- **Pinia**: Vue 3官方推荐的状态管理库

### 路由
- **Vue Router 4**: Vue 3配套的路由管理

### HTTP 客户端
- **Axios**: 成熟的HTTP客户端库

### 音频处理
- **Web Audio API**: 浏览器原生音频处理
- **MediaRecorder API**: 音频录制功能

## 后端技术栈

### Web 框架
- **FastAPI**: 现代化的Python Web框架
  - 自动API文档生成
  - 类型提示支持
  - 异步支持
  - 高性能

### 数据库
- **开发环境**: SQLite (轻量级，无需额外配置)
- **生产环境**: PostgreSQL (稳定可靠，支持复杂查询)
- **ORM**: SQLAlchemy 2.0 (异步支持)

### 文件存储
- **本地存储**: 开发和小规模部署
- **云存储**: 腾讯云COS或阿里云OSS (生产环境)

### 音频处理
- **librosa**: 音频分析和特征提取
- **soundfile**: 音频文件读写
- **pydub**: 音频格式转换和基础处理

### 安全认证
- **JWT**: JSON Web Token认证
- **bcrypt**: 密码哈希
- **python-jose**: JWT处理

## AI 语音服务技术栈

### 核心AI模型
- **主选方案**: MockingBird
  - 开源声音克隆项目
  - 支持中文
  - 训练时间相对较短
  - 社区活跃

- **备选方案**:
  - **Coqui TTS**: 工业级TTS解决方案
  - **OpenTTS**: 多语言支持
  - **系统TTS**: 作为fallback方案

### 深度学习框架
- **PyTorch**: 主流深度学习框架
- **torchaudio**: 音频处理扩展

### 音频预处理
- **webrtcvad**: 语音活动检测
- **pyworld**: 语音信号处理
- **praat-parselmouth**: 语音分析

### 中文处理
- **jieba**: 中文分词
- **pypinyin**: 拼音转换

## 部署技术栈

### 前端部署
- **EdgeOne Pages**: 腾讯云边缘计算平台
  - 全球CDN加速
  - 自动构建部署
  - HTTPS支持
  - 成本低廉

### 后端部署
- **云服务器**: 腾讯云CVM或阿里云ECS
- **容器化**: Docker (可选)
- **反向代理**: Nginx
- **进程管理**: PM2 或 Supervisor

### AI服务部署
- **GPU服务器**: 支持CUDA的云服务器
- **模型服务**: 独立的AI推理服务
- **负载均衡**: 多实例部署 (后期优化)

## 开发工具链

### 代码管理
- **Git**: 版本控制
- **GitHub/GitLab**: 代码托管

### 代码质量
- **前端**: ESLint + Prettier
- **后端**: Black + isort + flake8
- **测试**: Jest (前端) + pytest (后端)

### CI/CD
- **GitHub Actions**: 自动化构建和部署
- **EdgeOne**: 前端自动部署

## 技术选型理由

### 为什么选择 Vue.js 3？
1. **学习曲线平缓**: 适合快速开发
2. **生态成熟**: 组件库和工具链完善
3. **PWA支持**: 良好的移动端体验
4. **中文社区**: 文档和资源丰富

### 为什么选择 FastAPI？
1. **现代化**: 支持异步和类型提示
2. **性能优秀**: 接近Node.js和Go的性能
3. **自动文档**: 减少API文档维护成本
4. **AI集成**: Python生态对AI模型友好

### 为什么选择 MockingBird？
1. **开源免费**: 降低项目成本
2. **中文支持**: 适合目标用户群体
3. **社区活跃**: 问题解决和功能更新
4. **部署相对简单**: 相比其他方案更容易集成

## 风险评估

### 技术风险
1. **MockingBird稳定性**: 开源项目可能存在bug
   - **缓解**: 准备备选方案，充分测试
2. **GPU资源成本**: AI推理需要GPU支持
   - **缓解**: 优化模型，考虑CPU推理方案
3. **移动端兼容性**: PWA在不同设备上的表现
   - **缓解**: 充分测试，渐进式增强

### 扩展性考虑
1. **用户增长**: 架构支持水平扩展
2. **功能扩展**: 模块化设计便于添加新功能
3. **多语言支持**: 预留国际化接口

## 下一步行动

1. **验证MockingBird**: 搭建测试环境，验证功能
2. **创建MVP**: 实现最小可行产品
3. **性能测试**: 评估各组件性能表现
4. **用户测试**: 收集真实用户反馈

这个技术栈选型平衡了开发效率、性能要求和部署成本，为项目的成功实施提供了坚实的技术基础。
